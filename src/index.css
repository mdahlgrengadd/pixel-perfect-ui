@import 'tailwindcss';

@plugin 'tailwindcss-animate';

@custom-variant dark (&:is(.dark *));

@utility container {
  margin-inline: auto;
  padding-inline: 2rem;
  @media (width >= --theme(--breakpoint-sm)) {
    max-width: none;
  }
  @media (width >= 1400px) {
    max-width: 1400px;
  }
}

@theme {
  --color-border: hsl(var(--border));
  --color-border-light: hsl(var(--border-light));
  --color-border-dark: hsl(var(--border-dark));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--accent));
  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));

  --color-panel: hsl(var(--panel));
  --color-panel-foreground: hsl(var(--panel-foreground));
  --color-panel-header: hsl(var(--panel-header));

  --color-workspace: hsl(var(--workspace));
  --color-workspace-foreground: hsl(var(--workspace-foreground));

  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));

  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));

  --color-highlight: hsl(var(--highlight));
  --color-shadow: hsl(var(--shadow));

  --color-document: hsl(var(--document));
  --color-document-foreground: hsl(var(--document-foreground));
  --color-document-shadow: hsl(var(--document-shadow));

  --color-ruler: hsl(var(--ruler));
  --color-ruler-foreground: hsl(var(--ruler-foreground));
  --color-ruler-tick: hsl(var(--ruler-tick));
  --color-ruler-cursor: hsl(var(--ruler-cursor));

  --color-swatch-foreground: hsl(var(--swatch-foreground));
  --color-swatch-background: hsl(var(--swatch-background));

  --color-tool-active: hsl(var(--tool-active));
  --color-tool-hover: hsl(var(--tool-hover));

  --color-layer-selected: hsl(var(--layer-selected));
  --color-layer-selected-foreground: hsl(var(--layer-selected-foreground));

  --color-menu-hover: hsl(var(--menu-hover));
  --color-menu-hover-foreground: hsl(var(--menu-hover-foreground));

  --color-tab-bar: hsl(var(--tab-bar));
  --color-tab-active: hsl(var(--tab-active));
  --color-tab-inactive: hsl(var(--tab-inactive));

  --font-ui: Segoe UI, Tahoma, Arial, sans-serif;

  --text-2xs: 10px;
  --text-xs: 11px;
  --text-sm: 12px;

  --spacing-menu-h: var(--menu-height);
  --spacing-options-h: var(--options-height);
  --spacing-tools-w: var(--tools-width);
  --spacing-dock-w: var(--dock-width);
  --spacing-ruler: var(--ruler-size);
  --spacing-tool-btn: var(--tool-button-size);
  --spacing-panel-header: var(--panel-header-height);
  --spacing-tab-h: var(--tab-height);

  --radius-none: 0px;
  --radius-sm: 1px;
  --radius: 1px;
  --radius-md: 2px;

  --shadow-inset:
    inset 1px 1px 0 hsl(var(--shadow)), inset -1px -1px 0 hsl(var(--highlight));
  --shadow-raised:
    inset -1px -1px 0 hsl(var(--shadow)), inset 1px 1px 0 hsl(var(--highlight));
  --shadow-pressed:
    inset 1px 1px 0 hsl(var(--shadow)), inset -1px -1px 0 hsl(var(--highlight));
  --shadow-doc:
    2px 2px 4px hsl(var(--document-shadow) / 0.4),
    4px 4px 8px hsl(var(--document-shadow) / 0.2);

  --min-width-app: 980px;
}

/*
  The default border color has changed to `currentcolor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
  *,
  ::after,
  ::before,
  ::backdrop,
  ::file-selector-button {
    border-color: var(--color-gray-200, currentcolor);
  }
}

/* Classic UI Utilities */
@utility inset-input {
  /* Inset border effect for inputs */
  box-shadow:
    inset 1px 1px 0 hsl(var(--shadow)),
    inset -1px -1px 0 hsl(var(--highlight));

  /* Modern flat style (only applies in dark mode) */
  .dark & {
    box-shadow: none;
  }
}
@utility raised {
  /* Raised button effect */
  box-shadow:
    inset -1px -1px 0 hsl(var(--shadow)),
    inset 1px 1px 0 hsl(var(--highlight));

  .dark & {
    box-shadow: none;
  }
}
@utility pressed {
  /* Pressed button effect */
  box-shadow:
    inset 1px 1px 0 hsl(var(--shadow)),
    inset -1px -1px 0 hsl(var(--highlight));

  .dark & {
    box-shadow: none;
  }
}
@utility groove {
  /* Panel groove */
  box-shadow:
    inset 0 1px 0 hsl(var(--shadow)),
    0 1px 0 hsl(var(--highlight));
}
@utility doc-shadow {
  /* Document shadow */
  box-shadow:
    2px 2px 4px hsl(var(--document-shadow) / 0.4),
    4px 4px 8px hsl(var(--document-shadow) / 0.2);

  .dark & {
    box-shadow: 0 4px 20px hsl(0 0% 0% / 0.5);
  }
}
@utility dark {
  /* Modern flat style (only applies in dark mode) */
  & .inset-input {
    box-shadow: none;
  }
  & .raised {
    box-shadow: none;
  }
  & .pressed {
    box-shadow: none;
  }

  & .doc-shadow {
    box-shadow: 0 4px 20px hsl(0 0% 0% / 0.5);
  }
}

/* Adobe Photoshop UI Design System */
/* All colors in HSL for Tailwind compatibility */

@layer base {
  /* Classic Photoshop Gray Theme (Default) */
  :root {
    --background: 0 0% 82%; /* #d0d0d0 - main app background */
    --foreground: 0 0% 7%; /* #111 - primary text */
    
    --panel: 0 0% 89%; /* #e3e3e3 - panel surfaces */
    --panel-foreground: 0 0% 7%;
    
    --workspace: 0 0% 50%; /* #808080 - canvas workspace area */
    --workspace-foreground: 0 0% 100%;
    
    --border: 0 0% 60%; /* #9a9a9a - main borders */
    --border-light: 0 0% 71%; /* #b5b5b5 - inner dividers */
    --border-dark: 0 0% 45%; /* #737373 - darker borders */
    
    --input: 0 0% 100%; /* white input backgrounds */
    --input-foreground: 0 0% 7%;
    
    --muted: 0 0% 75%; /* #bfbfbf */
    --muted-foreground: 0 0% 27%; /* #444 - inactive text */
    
    --accent: 210 60% 45%; /* blue selection */
    --accent-foreground: 0 0% 100%;
    
    --highlight: 0 0% 95%; /* light highlight */
    --shadow: 0 0% 40%; /* shadow color */
    
    /* Panel-specific */
    --panel-header: 0 0% 85%;
    --panel-header-foreground: 0 0% 7%;
    
    --menu-hover: 210 60% 50%;
    --menu-hover-foreground: 0 0% 100%;
    
    --tool-active: 0 0% 70%;
    --tool-hover: 0 0% 78%;
    
    --layer-selected: 210 50% 70%;
    --layer-selected-foreground: 0 0% 7%;
    
    /* Document */
    --document: 0 0% 100%;
    --document-foreground: 0 0% 7%;
    --document-shadow: 0 0% 30%;
    
    /* Rulers */
    --ruler: 0 0% 28%;
    --ruler-foreground: 0 0% 65%;
    --ruler-tick: 0 0% 55%;
    --ruler-cursor: 0 0% 100%;
    
    /* Swatches */
    --swatch-foreground: 0 0% 0%;
    --swatch-background: 0 0% 100%;
    
    /* Tab bar */
    --tab-bar: 0 0% 75%;
    --tab-active: 0 0% 50%;
    --tab-inactive: 0 0% 35%;
    
    --radius: 1px;
    
    /* Typography */
    --font-ui: "Segoe UI", "Tahoma", "Arial", sans-serif;
    --font-size-xs: 10px;
    --font-size-sm: 11px;
    --font-size-base: 12px;
    --line-height-compact: 1.2;
    
    /* Spacing */
    --space-1: 1px;
    --space-2: 2px;
    --space-3: 3px;
    --space-4: 4px;
    --space-6: 6px;
    --space-8: 8px;
    
    /* Layout dimensions */
    --menu-height: 24px;
    --options-height: 34px;
    --tools-width: 54px;
    --dock-width: 300px;
    --ruler-size: 20px;
    --tool-button-size: 26px;
    --panel-header-height: 22px;
    --tab-height: 20px;
    
    /* Theme mode flag */
    --is-modern: 0;
  }

  /* Modern Dark Photoshop CC Theme */
  .dark {
    --background: 0 0% 20%; /* #333 - main app background */
    --foreground: 0 0% 90%; /* #e6e6e6 - primary text */
    
    --panel: 0 0% 18%; /* #2e2e2e - panel surfaces */
    --panel-foreground: 0 0% 85%;
    
    --workspace: 0 0% 15%; /* #262626 - canvas workspace area */
    --workspace-foreground: 0 0% 75%;
    
    --border: 0 0% 12%; /* #1f1f1f - main borders */
    --border-light: 0 0% 25%; /* #404040 - inner dividers */
    --border-dark: 0 0% 8%; /* #141414 - darker borders */
    
    --input: 0 0% 12%; /* dark input backgrounds */
    --input-foreground: 0 0% 90%;
    
    --muted: 0 0% 25%; /* #404040 */
    --muted-foreground: 0 0% 55%; /* #8c8c8c - inactive text */
    
    --accent: 207 90% 54%; /* #2d9cdb - blue selection */
    --accent-foreground: 0 0% 100%;
    
    --highlight: 0 0% 30%; /* subtle highlight */
    --shadow: 0 0% 5%; /* shadow color */
    
    /* Panel-specific */
    --panel-header: 0 0% 22%;
    --panel-header-foreground: 0 0% 85%;
    
    --menu-hover: 207 90% 45%;
    --menu-hover-foreground: 0 0% 100%;
    
    --tool-active: 207 90% 40%;
    --tool-hover: 0 0% 28%;
    
    --layer-selected: 207 60% 35%;
    --layer-selected-foreground: 0 0% 100%;
    
    /* Document */
    --document: 0 0% 0%;
    --document-foreground: 0 0% 100%;
    --document-shadow: 0 0% 0%;
    
    /* Rulers */
    --ruler: 0 0% 22%;
    --ruler-foreground: 0 0% 50%;
    --ruler-tick: 0 0% 40%;
    --ruler-cursor: 207 90% 54%;
    
    /* Swatches */
    --swatch-foreground: 0 0% 100%;
    --swatch-background: 0 0% 0%;
    
    /* Tab bar */
    --tab-bar: 0 0% 15%;
    --tab-active: 0 0% 22%;
    --tab-inactive: 0 0% 15%;
    
    --radius: 3px;
    
    /* Theme mode flag */
    --is-modern: 1;
  }
}

@layer base {
  * {
    @apply border-border;
    box-sizing: border-box;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-ui);
    font-size: var(--font-size-base);
    line-height: var(--line-height-compact);
    -webkit-font-smoothing: antialiased;
    overflow: hidden;
    user-select: none;
  }
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 12px;
  height: 12px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--panel));
  border: 1px solid hsl(var(--border));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--muted));
  border: 1px solid hsl(var(--border));
  border-radius: var(--radius);
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--muted-foreground));
}

::-webkit-scrollbar-corner {
  background: hsl(var(--panel));
}

/* Dark mode scrollbar */
.dark::-webkit-scrollbar-thumb {
  background: hsl(0 0% 35%);
  border: none;
}

.dark::-webkit-scrollbar-track {
  background: hsl(var(--background));
  border: none;
}

/* Fluent UI overrides for classic look */
fluent-button {
  --accent-fill-rest: hsl(var(--background));
  --accent-fill-hover: hsl(var(--tool-hover));
  --accent-fill-active: hsl(var(--tool-active));
  --neutral-fill-rest: hsl(var(--panel));
  --neutral-stroke-rest: hsl(var(--border));
  --control-corner-radius: var(--radius);
}

fluent-tabs {
  --neutral-fill-rest: hsl(var(--panel));
}

fluent-slider {
  --accent-foreground-rest: hsl(var(--foreground));
}

/* Dark mode fluent overrides */
.dark fluent-button {
  --accent-fill-rest: hsl(var(--panel));
  --accent-fill-hover: hsl(var(--tool-hover));
  --neutral-fill-rest: hsl(var(--input));
  --neutral-stroke-rest: hsl(var(--border));
}
